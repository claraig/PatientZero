[gd_scene load_steps=63 format=2]

[ext_resource path="res://assets/town/town2.png" type="Texture" id=1]
[ext_resource path="res://assets/autoral/Locais/escola.png" type="Texture" id=2]
[ext_resource path="res://assets/autoral/Locais/mercado.png" type="Texture" id=3]
[ext_resource path="res://assets/autoral/Locais/aeroporto.png" type="Texture" id=4]
[ext_resource path="res://assets/autoral/Locais/shopping.png" type="Texture" id=5]
[ext_resource path="res://assets/autoral/Locais/escritorio.png" type="Texture" id=6]
[ext_resource path="res://assets/autoral/Locais/restaurante.png" type="Texture" id=7]
[ext_resource path="res://scenes/InfoTurno.gd" type="Script" id=8]
[ext_resource path="res://assets/audio/ALERT_Error.wav" type="AudioStream" id=9]
[ext_resource path="res://assets/audio/arquive-click.wav" type="AudioStream" id=10]
[ext_resource path="res://assets/audio/TurningPage1.wav" type="AudioStream" id=11]
[ext_resource path="res://assets/audio/MESSAGE-B_Accept.wav" type="AudioStream" id=12]
[ext_resource path="res://assets/autoral/Jornal/jornal_mortes.png" type="Texture" id=13]
[ext_resource path="res://Fonts/twCenC_100.tres" type="DynamicFont" id=14]
[ext_resource path="res://Fonts/twCenC_68.tres" type="DynamicFontData" id=15]
[ext_resource path="res://scripts/jornal.gd" type="Script" id=16]
[ext_resource path="res://assets/autoral/Fichas/ficha.png" type="Texture" id=17]
[ext_resource path="res://scripts/place.gd" type="Script" id=18]
[ext_resource path="res://assets/autoral/Jornal/jornal_dia0.png" type="Texture" id=19]
[ext_resource path="res://Fonts/courier_bold.tres" type="DynamicFont" id=20]
[ext_resource path="res://assets/autoral/notepad.png" type="Texture" id=21]
[ext_resource path="res://assets/autoral/Fichas/ficha_aberta.png" type="Texture" id=22]
[ext_resource path="res://assets/autoral/Fichas/arquivo.png" type="Texture" id=23]
[ext_resource path="res://assets/autoral/Locais/shopping-hover.png" type="Texture" id=24]
[ext_resource path="res://assets/autoral/Locais/escola-hover.png" type="Texture" id=25]
[ext_resource path="res://assets/autoral/Locais/restaurante-hover.png" type="Texture" id=26]
[ext_resource path="res://assets/autoral/Locais/mercado-hover.png" type="Texture" id=27]
[ext_resource path="res://assets/autoral/Locais/escritorio-hover.png" type="Texture" id=28]
[ext_resource path="res://assets/autoral/Locais/aeroporto-hover.png" type="Texture" id=29]
[ext_resource path="res://assets/autoral/painel-texto.png" type="Texture" id=30]
[ext_resource path="res://assets/autoral/cartaz.png" type="Texture" id=31]
[ext_resource path="res://assets/audio/eklee-KeyPressOld05.wav" type="AudioStream" id=32]
[ext_resource path="res://assets/autoral/Jornal/jornal_venceu.png" type="Texture" id=33]
[ext_resource path="res://assets/autoral/Botoes/botaoIsolar2.png" type="Texture" id=34]
[ext_resource path="res://assets/autoral/Jornal/jornal_doentes.png" type="Texture" id=35]
[ext_resource path="res://assets/autoral/Botoes/botaoDia.png" type="Texture" id=36]
[ext_resource path="res://assets/autoral/Botoes/botauMenu.png" type="Texture" id=37]
[ext_resource path="res://assets/audio/keyboard.wav" type="AudioStream" id=38]
[ext_resource path="res://Fonts/courier_small.tres" type="DynamicFont" id=39]
[ext_resource path="res://assets/autoral/Objetos/pc.png" type="Texture" id=40]
[ext_resource path="res://assets/autoral/Objetos/cena.png" type="Texture" id=41]
[ext_resource path="res://assets/autoral/fundo.png" type="Texture" id=42]
[ext_resource path="res://assets/autoral/Objetos/murall.png" type="Texture" id=43]
[ext_resource path="res://assets/autoral/Objetos/mesa com coisas.png" type="Texture" id=44]
[ext_resource path="res://Fonts/COURBD.TTF" type="DynamicFontData" id=45]
[ext_resource path="res://assets/autoral/Objetos/luminaria_roxa.png" type="Texture" id=46]
[ext_resource path="res://assets/autoral/Objetos/luminaria_verde.png" type="Texture" id=47]

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

var turnoAtual:int
var quantidadeDoentes:int = 0
var quantidadeMortos:int = 0
var pessoas
var lugares
var pacienteZero
var venceu = false


# Called when the node enters the scene tree for the first time.
func _ready():

	turnoAtual = 1
	venceu = false

	$canvas_jornal/jornal.show()
	$canvas_jornal/jornal/j_dia1.show()

	$canvas_jornal/jornal/j_doentes.hide()
	$canvas_jornal/jornal/j_mortes.hide()	 #ainda não morreu ninguém
	$canvas_jornal/jornal/j_venceu.hide()	#ainda não encontrou

	$canvas_jornal/bJornal.show() #background escuro
	get_node('Sons/turno').play()
	pessoas = get_node(\"Population\").get_children()
	print(pessoas)
	lugares = get_node(\"Places\").get_children()
	_passarTurno()
	_atualizarInfos()

func _atualizarInfos():

	var texto = \"Dia Atual: \" + str(turnoAtual) + \"  Doentes: \" + str(quantidadeDoentes) + \"  Mortos: \" + str(quantidadeMortos)
	get_node(\"display-canvas-bg/dia\").set_text(str(turnoAtual))
	get_node(\"display-canvas-bg/doentes\").set_text(str(quantidadeDoentes))
	get_node(\"display-canvas-bg/mortos\").set_text(str(quantidadeMortos))


	# Atualizar Jornal com apenas doentes
	var jdoentes = \"Cidade tem \" + str(quantidadeDoentes) + \" doente(s).\"
	get_node('canvas_jornal/jornal/j_doentes/j_doentes/jinfec').set_text(jdoentes)

	# Atualizar Jornal com mortes
	var jmortes = \"Vírus matou\\n\" + str(quantidadeMortos) + \" pessoa(s).\"
	get_node('canvas_jornal/jornal/j_mortes/j_mortes/jmortes').set_text(jmortes)
	var jinfectados = \"Cidade tem\\n\" + str(quantidadeDoentes) + \"  doente(s).\"
	get_node('canvas_jornal/jornal/j_mortes/j_mortes/jinfec').set_text(jinfectados)
	var jturno = \"Dia \" + str(turnoAtual)
	get_node('canvas_jornal/jornal/j_mortes/j_mortes/jturno').set_text(jturno)

	# Atualizar Jornal vitória
	get_node('canvas_jornal/jornal/j_venceu/j_venceu/jturno').set_text(jturno)



func _encontraPacienteZero():
	for n in pessoas:
		if(n.pacienteZero == 1):
			pacienteZero = n

#func _movimentoPacienteZero():
#	var lugaresFrequentados = []
#	var pessoasEncontradas = []
#	for i in range(0, 1):
#		pacienteZero.inte


func _movimentoVisitacao():
	for p in pessoas:
		if (p.imunidade > 0 && p.name != get_node(\"Population\").isolado):
			randomize()
			var place1 = randi()%lugares.size()-1
			randomize()
			var place2 = randi()%lugares.size()-1
			if (place1 == place2):
				lugares[place1].visitantes[turnoAtual-1].pessoas.push_back(p.name)
			else:
				lugares[place1].visitantes[turnoAtual-1].pessoas.push_back(p.name)
				lugares[place2].visitantes[turnoAtual-1].pessoas.push_back(p.name)


func _passandoDoenca():
	var contaminadas = []
	for p in pessoas:
		if(p.doente || p.pacienteZero):
			for l in lugares:
				if(l.visitantes[turnoAtual-1].pessoas.has(p.name) && l.visitantes[turnoAtual-1].pessoas.size() > 1):
					contaminadas.push_back(_retornaContaminada(p.name, l.visitantes[turnoAtual-1].pessoas))
	print(contaminadas)
	for p in pessoas:
		if(contaminadas.has(p.name) && (!p.doente && !p.pacienteZero)):
			p.doente = true
			quantidadeDoentes+=1
			p.turnoAdoecimento = turnoAtual
			p.get_node(\"Button\").add_color_override(\"font_color\", Color( 1, 0.5, 0.31, 0.7 ))

#			p.get_node(\"Button\").add_color_override(\"font_color\", Color(9,248,43))


func _retornaContaminada(doente, visitantes):
	var sorteado = doente
	var randon
	while(sorteado == doente):
		randon = randi() % visitantes.size()-1
		sorteado = visitantes[randon]
	return sorteado


func _diminuindoImunidade():
	for p in pessoas:
		if(p.doente && p.imunidade > 0):
			p.imunidade-=1
		if(p.imunidade == 0 && !p.morta):
			p.morta = true
			p.turnoMorte = turnoAtual
			quantidadeMortos+=1
#			p.get_node(\"Button\").visible = false
			if(quantidadeDoentes > 0):
				quantidadeDoentes-=1

func _desabilitarMortosPraNaoVirarZumbi():
	for p in pessoas:
		print(p.get_children())
		if(p.morta):
			p.get_node(\"Button\").add_color_override(\"font_color\", Color( 1, 0.1, 0.1, 1 ))



func _tirarIsolamento():
	for p in pessoas:
		if(p.name == get_node(\"Population\").isolado):
			p.get_node(\"Button\").disabled = false
	get_node(\"Population\").isolado = \"\"
	get_node(\"Population\").selecionado = \"\"
# Passar de Turno

func _inserirTurnoLugares():
	for l in lugares:
		l.visitantes.push_back({\"turno\":turnoAtual,\"pessoas\":[]})


func _passarTurno():
	_venceu()
	if(!venceu):
		_inserirTurnoLugares()
		_movimentoVisitacao()
		_passandoDoenca()
		_tirarIsolamento()
	else:
		$canvas_jornal/jornal/j_venceu.show()
		get_node(\"display-canvas-bg/frase\").set_text(\"Você encontrou o paciente zero, parabéns!\")
		get_node('Sons/venceu').play()
		get_node(\"Cartaz/InfoTurno\")._corVenceu()

	_desabilitarMortosPraNaoVirarZumbi()
	_atualizarInfos()


func _on_NextTurn_button_down():
	turnoAtual+=1
	_diminuindoImunidade()
	if(quantidadeMortos < pessoas.size()-1):
		get_node('Sons/turno').play()
		_passarTurno()
		$canvas_jornal/jornal.show()
		if(quantidadeMortos == 0):
			$canvas_jornal/jornal/j_mortes.hide()
			$canvas_jornal/jornal/j_doentes.show()
		else:
			$canvas_jornal/jornal/j_mortes.show()
		$canvas_jornal/bJornal.show()
	else:
		_desabilitarMortosPraNaoVirarZumbi()
		_atualizarInfos()
		get_node(\"display-canvas-bg/frase\").set_text(\"Todos Morreram! FIm de Jogo =(\")
		get_node('Sons/perdeu').play()
		get_node(\"Cartaz/InfoTurno\")._corPerdeu()
		get_node(\"NextTurn\").visible = false
		get_node(\"NextTurn\").disabled = true
		get_node(\"RetornaMenu\").visible = true
		get_node(\"RetornaMenu\").disabled = false



func _on_bJornal_button_up() -> void:
	$canvas_jornal/jornal.hide()
	$canvas_jornal/bJornal.hide()
	get_node(\"canvas_jornal/jornal\")._reset()

# Venceu

func _venceu():
	for p in pessoas:
		if(p.name == get_node(\"Population\").isolado && p.pacienteZero):
			venceu = true
			get_node(\"NextTurn\").visible = false
			get_node(\"NextTurn\").disabled = true
			get_node(\"RetornaMenu\").visible = true
			get_node(\"RetornaMenu\").disabled = false


func _on_RetornaMenu_button_down():
	get_tree().change_scene(\"res://scenes/Menu.tscn\")


func _on_TextEdit_gui_input(event: InputEvent) -> void:
	if event is InputEventKey  and event.pressed:
		get_node('Sons/teclar').play()
"

[sub_resource type="StyleBoxFlat" id=2]
bg_color = Color( 1, 0.847059, 0, 1 )

[sub_resource type="DynamicFont" id=15]
size = 17
use_filter = true
font_data = ExtResource( 45 )

[sub_resource type="StyleBoxFlat" id=3]
bg_color = Color( 0.6, 0.6, 0.6, 0 )

[sub_resource type="StyleBoxFlat" id=4]
bg_color = Color( 0.6, 0.6, 0.6, 0 )

[sub_resource type="DynamicFontData" id=5]
hinting = 0
font_path = "res://Fonts/COUR.TTF"

[sub_resource type="DynamicFont" id=6]
outline_color = Color( 0, 0, 0, 1 )
font_data = SubResource( 5 )

[sub_resource type="StyleBoxFlat" id=7]

[sub_resource type="GDScript" id=8]
script/source = "extends Node

var isolado:String = \"\"
var selecionado:String = \"\"

# Called when the node enters the scene tree for the first time.
func _ready():
	_inicializaPessoas()
	_inicializarPacienteZero()
	_printPessoas()


func _inicializaPessoas():
	var listaPessoas = get_children()
	for n in listaPessoas :
		randomize()
		n.imunidade = rand_range(3,5)

func _inicializarPacienteZero():
	randomize()
	var listaPessoas = get_children()
	print(listaPessoas.size())
	var sorteado = rand_range(0, listaPessoas.size())
	listaPessoas[sorteado].pacienteZero = true


func _printPessoas():
	var listaPessoas = get_children()
	for n in listaPessoas :
		print(n.name)
		print(\"Imunidade\")
		print(n.imunidade)
		print(\"é paciente zero ?\")
		print(n.pacienteZero)


# Isolar pessoa

func _on_Button_button_down():
		for p in get_children():
			p.get_node(\"Button\").disabled = false
			if(p.name == selecionado && !p.morta):
				p.get_node(\"Button\").disabled = true
				isolado = selecionado
				get_parent().get_node(\"display-canvas-bg/pessoaIsolada\").set_text(selecionado)


# Called every frame. 'delta' is the elapsed time since the previous frame.
#func _process(delta):
#	pass
"

[sub_resource type="GDScript" id=9]
script/source = "extends Node

var imunidade:int
var isolada:bool = false
var morta:bool = false
var doente:bool = false
var pacienteZero:bool = false
var maximo_contatos:int = 2
var turnoAdoecimento
var turnoMorte
var texto: String

# Called when the node enters the scene tree for the first time.
func _ready():
	get_parent().get_parent().get_node('Fichas/FichaFechada').show()
	get_parent().get_parent().get_node('Isolar').hide()
	get_parent().get_parent().get_node('Fichas/painelFicha').hide()
	pass

func formatarInteracoes():
	texto += \"Adoeceu dia \"+ str(turnoAdoecimento)+ \"\\n\"

func _on_Button_button_down():
	get_parent().get_parent().get_node(\"Sons/clicar_arquivo\").play()
	get_parent().get_parent().get_node('Fichas/FichaFechada').hide()
	get_parent().get_parent().get_node('Isolar').show()
	get_parent().get_parent().get_node('Fichas/painelFicha').show()

	texto = \"Nome: \"+str(name)+\"\\n\"
	get_parent().get_parent().get_node(\"Population\").selecionado = name

	if(morta):
		texto += \"Morreu dia \"+ str(turnoMorte)+ \"\\n\"
	if(doente):
		formatarInteracoes()
	else :
		texto += \"Essa pessoa ainda não foi ao hospital!\"
	get_parent().get_parent().get_node('Fichas/painelFicha').set_text(texto)

# Called every frame. 'delta' is the elapsed time since the previous frame.
#func _process(delta):
"

[sub_resource type="StyleBoxFlat" id=10]
bg_color = Color( 0.596078, 0.72549, 0.721569, 1 )
draw_center = false

[sub_resource type="StyleBoxFlat" id=11]
bg_color = Color( 0.623529, 0.282353, 0.0666667, 1 )

[sub_resource type="StyleBoxFlat" id=12]
bg_color = Color( 0.933333, 0.427451, 0.180392, 1 )

[sub_resource type="DynamicFont" id=13]
size = 90
font_data = ExtResource( 15 )

[sub_resource type="DynamicFont" id=14]
size = 65
font_data = ExtResource( 15 )

[node name="Town" type="Node2D"]
script = SubResource( 1 )

[node name="background_color2" type="Sprite" parent="."]
position = Vector2( 640.716, 360.716 )
scale = Vector2( 1.57735, 1.14207 )
z_index = -10
texture = ExtResource( 42 )
region_rect = Rect2( 1280, 0, 0, 0 )
__meta__ = {
"_edit_lock_": true
}

[node name="referenciaCena" type="Sprite" parent="."]
visible = false
self_modulate = Color( 1, 1, 1, 0.611765 )
position = Vector2( 640.897, 362.148 )
scale = Vector2( 0.938978, 0.894059 )
z_index = 10
texture = ExtResource( 41 )
region_rect = Rect2( 1280, 0, 0, 0 )

[node name="Cartaz" type="Node2D" parent="."]

[node name="InfoTurno" type="Label" parent="Cartaz"]
margin_left = 694.698
margin_top = 68.1883
margin_right = 983.698
margin_bottom = 207.188
custom_styles/normal = SubResource( 2 )
align = 1
valign = 1
autowrap = true
script = ExtResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="cartaz" type="Sprite" parent="Cartaz"]
position = Vector2( 838.35, 127.748 )
texture = ExtResource( 31 )
__meta__ = {
"_edit_lock_": true
}

[node name="Label" type="Label" parent="Cartaz"]
margin_left = 801.983
margin_top = 62.8696
margin_right = 845.983
margin_bottom = 84.8696
custom_fonts/font = SubResource( 15 )
custom_colors/font_color = Color( 0.235294, 0.211765, 0.180392, 1 )
text = "Dia"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label2" type="Label" parent="Cartaz"]
margin_left = 683.631
margin_top = 92.2521
margin_right = 837.631
margin_bottom = 164.252
custom_fonts/font = SubResource( 15 )
custom_colors/font_color = Color( 0.235294, 0.211765, 0.180392, 1 )
text = "Doentes
Mortos
Pessoa Isolada"
align = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="display-canvas-bg" type="CanvasLayer" parent="."]

[node name="dia" type="Label" parent="display-canvas-bg"]
margin_left = 848.537
margin_top = 65.7839
margin_right = 876.537
margin_bottom = 85.7839
custom_colors/font_color = Color( 0, 0, 0, 1 )
align = 1
valign = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="doentes" type="Label" parent="display-canvas-bg"]
margin_left = 850.537
margin_top = 89.7839
margin_right = 982.537
margin_bottom = 109.784
custom_colors/font_color = Color( 0, 0, 0, 1 )
align = 1
valign = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="mortos" type="Label" parent="display-canvas-bg"]
margin_left = 850.537
margin_top = 116.784
margin_right = 981.537
margin_bottom = 136.784
custom_colors/font_color = Color( 0, 0, 0, 1 )
align = 1
valign = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="pessoaIsolada" type="Label" parent="display-canvas-bg"]
margin_left = 850.537
margin_top = 143.784
margin_right = 982.537
margin_bottom = 165.784
custom_colors/font_color = Color( 0, 0, 0, 1 )
align = 1
valign = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="frase" type="Label" parent="display-canvas-bg"]
margin_left = 703.537
margin_top = 171.784
margin_right = 980.537
margin_bottom = 200.784
custom_colors/font_color = Color( 0, 0, 0, 1 )
align = 1
valign = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="quadro" type="Sprite" parent="display-canvas-bg"]
visible = false
position = Vector2( 842.621, 143.526 )
scale = Vector2( 0.489, 0.475 )
z_index = 5
texture = ExtResource( 30 )

[node name="painelPC" type="TextEdit" parent="."]
margin_left = 945.0
margin_top = 348.0
margin_right = 1162.0
margin_bottom = 547.0
custom_styles/read_only = SubResource( 3 )
custom_styles/normal = SubResource( 4 )
custom_fonts/font = ExtResource( 39 )
custom_colors/font_color_selected = Color( 0, 0, 0, 1 )
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_colors/line_number_color = Color( 0, 0, 0, 1 )
custom_colors/font_color_readonly = Color( 1, 1, 1, 1 )
text = "Informações"
readonly = true
smooth_scrolling = true
wrap_enabled = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="bloco de notas" type="Node2D" parent="."]
position = Vector2( 985.566, 33.8241 )

[node name="notas" type="Sprite" parent="bloco de notas"]
position = Vector2( 164.699, 103.573 )
scale = Vector2( 0.368898, 0.392572 )
z_index = -1
texture = ExtResource( 21 )

[node name="TextEdit" type="TextEdit" parent="bloco de notas"]
light_mask = 0
margin_left = 63.0
margin_top = 54.0
margin_right = 265.0
margin_bottom = 195.0
custom_fonts/font = ExtResource( 39 )
custom_colors/background_color = Color( 0.368627, 0.368627, 0.372549, 1 )
text = "pode escrever aqui"
syntax_highlighting = true
show_line_numbers = true
wrap_enabled = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Sons" type="Node" parent="."]

[node name="venceu" type="AudioStreamPlayer" parent="Sons"]
stream = ExtResource( 12 )

[node name="clicar_lugar" type="AudioStreamPlayer2D" parent="Sons"]
stream = ExtResource( 38 )

[node name="perdeu" type="AudioStreamPlayer" parent="Sons"]
stream = ExtResource( 9 )

[node name="clicar_arquivo" type="AudioStreamPlayer2D" parent="Sons"]
stream = ExtResource( 10 )

[node name="turno" type="AudioStreamPlayer2D" parent="Sons"]
stream = ExtResource( 11 )

[node name="teclar" type="AudioStreamPlayer2D" parent="Sons"]
stream = ExtResource( 32 )

[node name="Fichas" type="Node2D" parent="."]
position = Vector2( 161.705, 127.693 )

[node name="FichaFechada" type="Sprite" parent="Fichas"]
position = Vector2( -13, 39 )
scale = Vector2( 0.33, 0.33 )
z_index = -1
texture = ExtResource( 17 )

[node name="FichaAberta" type="Sprite" parent="Fichas"]
position = Vector2( -13, 39 )
scale = Vector2( 0.33, 0.33 )
z_index = -2
texture = ExtResource( 22 )

[node name="Arquivo" type="Sprite" parent="Fichas"]
position = Vector2( 14.9935, 472.464 )
scale = Vector2( 0.288485, 0.288485 )
z_index = -1
texture = ExtResource( 23 )
__meta__ = {
"_edit_lock_": true
}

[node name="painelFicha" type="Label" parent="Fichas"]
margin_left = -39.705
margin_top = -23.693
margin_right = 108.295
margin_bottom = 62.307
custom_fonts/font = SubResource( 6 )
custom_colors/font_color = Color( 0, 0, 0, 1 )
text = "Informações"
align = 1
valign = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="SpritesObjetos" type="Node2D" parent="."]

[node name="spr_town2" type="Sprite" parent="SpritesObjetos"]
visible = false
show_behind_parent = true
position = Vector2( 660.489, 366.923 )
scale = Vector2( 0.348639, 0.431027 )
z_index = -2
texture = ExtResource( 1 )

[node name="Computador" type="Sprite" parent="SpritesObjetos"]
position = Vector2( 1050.92, 502.191 )
scale = Vector2( 1.10523, 1.10523 )
z_index = -7
texture = ExtResource( 40 )

[node name="Mural" type="Sprite" parent="SpritesObjetos"]
position = Vector2( 661.167, 296.742 )
scale = Vector2( 0.628135, 0.65574 )
z_index = -9
texture = ExtResource( 43 )
__meta__ = {
"_edit_lock_": true
}

[node name="Mesa" type="Sprite" parent="SpritesObjetos"]
position = Vector2( 993.835, 599.592 )
scale = Vector2( 1.005, 1.005 )
z_index = -9
texture = ExtResource( 44 )

[node name="Luminaria" type="Sprite" parent="SpritesObjetos"]
position = Vector2( 1198.28, 297.781 )
rotation = 0.169487
scale = Vector2( 0.854862, 0.854862 )
texture = ExtResource( 46 )

[node name="Luminaria2" type="Sprite" parent="SpritesObjetos"]
position = Vector2( 1198.71, 297.694 )
rotation = 0.169487
scale = Vector2( 0.850868, 0.850868 )
texture = ExtResource( 47 )

[node name="Places" type="Node2D" parent="."]
position = Vector2( -12, 42.6477 )
z_index = -10
__meta__ = {
"_edit_lock_": true
}

[node name="Shopping" type="Node2D" parent="Places"]
position = Vector2( 24.0103, 62.6147 )
z_index = 10
script = ExtResource( 18 )

[node name="TextureButton" type="TextureButton" parent="Places/Shopping"]
margin_left = 498.183
margin_top = 123.322
margin_right = 1010.18
margin_bottom = 528.322
rect_rotation = -7.58113
rect_scale = Vector2( 0.382, 0.428 )
texture_normal = ExtResource( 5 )
texture_hover = ExtResource( 24 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button" type="Button" parent="Places/Shopping"]
visible = false
modulate = Color( 0.776471, 0.713726, 0.713726, 1 )
margin_left = 611.799
margin_top = 410.173
margin_right = 1135.8
margin_bottom = 874.173
rect_rotation = -7.91883
rect_scale = Vector2( 0.347381, 0.36 )
custom_colors/font_color = Color( 0, 0, 0, 1 )
icon = ExtResource( 5 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Escola" type="Node2D" parent="Places"]
position = Vector2( -3, 0 )
z_index = 10
script = ExtResource( 18 )

[node name="TextureButton" type="TextureButton" parent="Places/Escola"]
margin_left = 423.119
margin_top = 305.829
margin_right = 935.119
margin_bottom = 710.829
rect_rotation = 23.0083
rect_scale = Vector2( 0.382, 0.428 )
texture_normal = ExtResource( 2 )
texture_hover = ExtResource( 25 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button" type="Button" parent="Places/Escola"]
visible = false
modulate = Color( 0.776471, 0.713726, 0.713726, 1 )
margin_left = 418.561
margin_top = 435.965
margin_right = 942.561
margin_bottom = 867.965
rect_rotation = 16.1989
rect_scale = Vector2( 0.347381, 0.36 )
icon = ExtResource( 2 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Mercado" type="Node2D" parent="Places"]
position = Vector2( -3, 0 )
z_index = 10
script = ExtResource( 18 )

[node name="TextureButton" type="TextureButton" parent="Places/Mercado"]
margin_left = 336.809
margin_top = 185.161
margin_right = 848.809
margin_bottom = 590.161
rect_rotation = -9.56306
rect_scale = Vector2( 0.382, 0.428 )
texture_normal = ExtResource( 3 )
texture_hover = ExtResource( 27 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button" type="Button" parent="Places/Mercado"]
visible = false
modulate = Color( 0.776471, 0.713726, 0.713726, 1 )
margin_left = 331.103
margin_top = 241.389
margin_right = 855.103
margin_bottom = 673.389
rect_rotation = -11.1106
rect_scale = Vector2( 0.347381, 0.36 )
icon = ExtResource( 3 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Restaurante" type="Node2D" parent="Places"]
position = Vector2( -3, 0 )
z_index = 10
script = ExtResource( 18 )

[node name="TextureButton" type="TextureButton" parent="Places/Restaurante"]
margin_left = 761.96
margin_top = 172.322
margin_right = 1273.96
margin_bottom = 577.322
rect_rotation = 1.23337
rect_scale = Vector2( 0.382, 0.428 )
texture_normal = ExtResource( 7 )
texture_hover = ExtResource( 26 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button" type="Button" parent="Places/Restaurante"]
visible = false
modulate = Color( 0.776471, 0.713726, 0.713726, 1 )
margin_left = 832.042
margin_top = 287.864
margin_right = 1356.04
margin_bottom = 719.865
rect_scale = Vector2( 0.347381, 0.36 )
icon = ExtResource( 7 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Escritorio" type="Node2D" parent="Places"]
position = Vector2( -3, 0 )
z_index = 10
script = ExtResource( 18 )

[node name="TextureButton" type="TextureButton" parent="Places/Escritorio"]
margin_left = 329.238
margin_top = 5.53602
margin_right = 841.238
margin_bottom = 410.536
rect_rotation = 1.4679
rect_scale = Vector2( 0.382, 0.428 )
texture_normal = ExtResource( 6 )
texture_hover = ExtResource( 28 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button" type="Button" parent="Places/Escritorio"]
visible = false
modulate = Color( 0.776471, 0.713726, 0.713726, 1 )
margin_left = 380.186
margin_top = -1.2626
margin_right = 904.186
margin_bottom = 470.737
rect_rotation = 11.398
rect_scale = Vector2( 0.347381, 0.36 )
icon = ExtResource( 6 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Aeroporto" type="Node2D" parent="Places"]
position = Vector2( -3, 0 )
z_index = 10
script = ExtResource( 18 )

[node name="TextureButton" type="TextureButton" parent="Places/Aeroporto"]
margin_left = 650.217
margin_top = 310.101
margin_right = 1162.22
margin_bottom = 715.101
rect_rotation = 10.6387
rect_scale = Vector2( 0.382, 0.428 )
texture_normal = ExtResource( 4 )
texture_hover = ExtResource( 29 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Button" type="Button" parent="Places/Aeroporto"]
visible = false
modulate = Color( 0.776471, 0.713726, 0.713726, 1 )
margin_left = 802.862
margin_top = 18.493
margin_right = 1316.86
margin_bottom = 536.493
rect_rotation = -8.06005
rect_scale = Vector2( 0.347381, 0.36 )
custom_styles/hover = SubResource( 7 )
icon = ExtResource( 4 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Population" type="Node2D" parent="."]
position = Vector2( 85.1284, 283.145 )
z_index = -7
script = SubResource( 8 )

[node name="Catia" type="Node" parent="Population"]
script = SubResource( 9 )

[node name="Button" type="Button" parent="Population/Catia"]
margin_left = 92.0
margin_top = 478.0
margin_right = 149.0
margin_bottom = 502.0
custom_fonts/font = ExtResource( 20 )
custom_colors/font_color = Color( 0.360784, 0.298039, 0.266667, 1 )
text = "Catia"
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Ivo" type="Node" parent="Population"]
script = SubResource( 9 )

[node name="Button" type="Button" parent="Population/Ivo"]
margin_left = 157.0
margin_top = 479.0
margin_right = 211.0
margin_bottom = 503.0
custom_fonts/font = ExtResource( 20 )
custom_colors/font_color = Color( 0.360784, 0.298039, 0.266667, 1 )
text = "Ivo"
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Leo" type="Node" parent="Population"]
script = SubResource( 9 )

[node name="Button" type="Button" parent="Population/Leo"]
margin_left = 222.0
margin_top = 479.0
margin_right = 269.0
margin_bottom = 503.0
custom_fonts/font = ExtResource( 20 )
custom_colors/font_color = Color( 0.360784, 0.298039, 0.266667, 1 )
text = "Leo"
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Cal" type="Node" parent="Population"]
script = SubResource( 9 )

[node name="Button" type="Button" parent="Population/Cal"]
margin_left = 68.0
margin_top = 495.0
margin_right = 127.0
margin_bottom = 519.0
custom_fonts/font = ExtResource( 20 )
custom_colors/font_color = Color( 0.360784, 0.298039, 0.266667, 1 )
text = "Cal"
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Mark" type="Node" parent="Population"]
script = SubResource( 9 )

[node name="Button" type="Button" parent="Population/Mark"]
margin_left = 125.0
margin_top = 495.0
margin_right = 181.0
margin_bottom = 519.0
custom_fonts/font = ExtResource( 20 )
custom_colors/font_color = Color( 0.360784, 0.298039, 0.266667, 1 )
text = "Mark"
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Sinty" type="Node" parent="Population"]
script = SubResource( 9 )

[node name="Button" type="Button" parent="Population/Sinty"]
margin_left = 186.0
margin_top = 494.0
margin_right = 245.0
margin_bottom = 518.0
custom_fonts/font = ExtResource( 20 )
custom_colors/font_color = Color( 0.360784, 0.298039, 0.266667, 1 )
text = "Sinty"
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Eron" type="Node" parent="Population"]
script = SubResource( 9 )

[node name="Button" type="Button" parent="Population/Eron"]
margin_left = 256.0
margin_top = 496.0
margin_right = 310.0
margin_bottom = 520.0
custom_fonts/font = ExtResource( 20 )
custom_colors/font_color = Color( 0.360784, 0.298039, 0.266667, 1 )
text = "Eron"
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Judite" type="Node" parent="Population"]
script = SubResource( 9 )

[node name="Button" type="Button" parent="Population/Judite"]
margin_left = 101.0
margin_top = 512.0
margin_right = 167.0
margin_bottom = 536.0
custom_fonts/font = ExtResource( 20 )
custom_colors/font_color = Color( 0.360784, 0.298039, 0.266667, 1 )
text = "Judite"
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Neil" type="Node" parent="Population"]
script = SubResource( 9 )

[node name="Button" type="Button" parent="Population/Neil"]
margin_left = 166.0
margin_top = 512.0
margin_right = 225.0
margin_bottom = 536.0
custom_fonts/font = ExtResource( 20 )
custom_colors/font_color = Color( 0.360784, 0.298039, 0.266667, 1 )
text = "Neil"
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Mary" type="Node" parent="Population"]
script = SubResource( 9 )

[node name="Button" type="Button" parent="Population/Mary"]
margin_left = 234.0
margin_top = 511.0
margin_right = 288.0
margin_bottom = 535.0
custom_styles/disabled = SubResource( 10 )
custom_fonts/font = ExtResource( 20 )
custom_colors/font_color = Color( 0.360784, 0.298039, 0.266667, 1 )
text = "Mary"
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="NextTurn" type="Button" parent="."]
margin_left = 56.3422
margin_top = 287.834
margin_right = 248.342
margin_bottom = 339.834
custom_styles/normal = SubResource( 11 )
icon = ExtResource( 36 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="RetornaMenu" type="Button" parent="."]
visible = false
margin_left = 64.8168
margin_top = 357.838
margin_right = 268.817
margin_bottom = 415.838
disabled = true
icon = ExtResource( 37 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Isolar" type="Button" parent="."]
margin_left = 94.992
margin_top = 208.664
margin_right = 199.992
margin_bottom = 258.664
custom_styles/normal = SubResource( 12 )
icon = ExtResource( 34 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="canvas_jornal" type="CanvasLayer" parent="."]
layer = 5

[node name="bJornal" type="Button" parent="canvas_jornal"]
visible = false
modulate = Color( 0.545098, 0.517647, 0.517647, 1 )
self_modulate = Color( 0.388235, 0.329412, 0.301961, 0.807843 )
light_mask = 0
margin_left = -328.588
margin_top = -246.823
margin_right = 1670.41
margin_bottom = 1022.18
focus_mode = 0
shortcut_in_tooltip = false
button_mask = 0
enabled_focus_mode = 0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="jornal" type="Node2D" parent="canvas_jornal"]
visible = false
position = Vector2( 654.412, 375.177 )
z_index = 143
script = ExtResource( 16 )

[node name="j_dia1" type="Node2D" parent="canvas_jornal/jornal"]
visible = false
z_index = 35
script = ExtResource( 16 )

[node name="j_dia0" type="Sprite" parent="canvas_jornal/jornal/j_dia1"]
scale = Vector2( 0.4, 0.4 )
z_index = 67
texture = ExtResource( 19 )

[node name="j_doentes" type="Node2D" parent="canvas_jornal/jornal"]
z_index = 39

[node name="j_doentes" type="Sprite" parent="canvas_jornal/jornal/j_doentes"]
scale = Vector2( 0.45, 0.45 )
z_index = 96
texture = ExtResource( 35 )

[node name="jturno" type="Label" parent="canvas_jornal/jornal/j_doentes/j_doentes"]
margin_left = 122.0
margin_top = -415.0
margin_right = 450.0
margin_bottom = -307.0
custom_fonts/font = ExtResource( 14 )
custom_colors/font_color = Color( 0.388235, 0.329412, 0.301961, 1 )
custom_constants/line_spacing = -25
text = "Dia 2"
align = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="jinfec" type="Label" parent="canvas_jornal/jornal/j_doentes/j_doentes"]
margin_left = -249.0
margin_top = 198.0
margin_right = 320.0
margin_bottom = 503.0
custom_fonts/font = SubResource( 13 )
custom_colors/font_color = Color( 0.388235, 0.329412, 0.301961, 1 )
custom_constants/line_spacing = -20
text = "Cidade tem x infectados"
align = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="j_mortes" type="Node2D" parent="canvas_jornal/jornal"]
visible = false
z_index = 39

[node name="j_mortes" type="Sprite" parent="canvas_jornal/jornal/j_mortes"]
scale = Vector2( 0.45, 0.45 )
z_index = 96
texture = ExtResource( 13 )

[node name="jmortes" type="Label" parent="canvas_jornal/jornal/j_mortes/j_mortes"]
margin_left = -262.0
margin_top = 225.0
margin_right = 211.0
margin_bottom = 416.0
custom_fonts/font = ExtResource( 14 )
custom_colors/font_color = Color( 0.388235, 0.329412, 0.301961, 1 )
custom_constants/line_spacing = -25
text = "Vírus matou
xx pessoas"
align = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="jturno" type="Label" parent="canvas_jornal/jornal/j_mortes/j_mortes"]
margin_left = 122.0
margin_top = -415.0
margin_right = 450.0
margin_bottom = -307.0
custom_fonts/font = ExtResource( 14 )
custom_colors/font_color = Color( 0.388235, 0.329412, 0.301961, 1 )
custom_constants/line_spacing = -25
text = "Dia 2"
align = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="jinfec" type="Label" parent="canvas_jornal/jornal/j_mortes/j_mortes"]
margin_left = 218.0
margin_top = 35.0
margin_right = 466.0
margin_bottom = 340.0
custom_fonts/font = SubResource( 14 )
custom_colors/font_color = Color( 0.388235, 0.329412, 0.301961, 1 )
custom_constants/line_spacing = -20
text = "Cidade tem x infectados"
align = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="j_venceu" type="Node2D" parent="canvas_jornal/jornal"]
visible = false
z_index = 39

[node name="j_venceu" type="Sprite" parent="canvas_jornal/jornal/j_venceu"]
scale = Vector2( 0.45, 0.45 )
z_index = 96
texture = ExtResource( 33 )

[node name="jturno" type="Label" parent="canvas_jornal/jornal/j_venceu/j_venceu"]
margin_left = 122.0
margin_top = -415.0
margin_right = 450.0
margin_bottom = -307.0
custom_fonts/font = ExtResource( 14 )
custom_colors/font_color = Color( 0.388235, 0.329412, 0.301961, 1 )
custom_constants/line_spacing = -25
text = "Dia 2"
align = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}
[connection signal="gui_input" from="bloco de notas/TextEdit" to="." method="_on_TextEdit_gui_input"]
[connection signal="button_down" from="Places/Shopping/TextureButton" to="Places/Shopping" method="_on_TextureButton_button_down"]
[connection signal="button_down" from="Places/Shopping/Button" to="Places/Shopping" method="_on_Button_button_down"]
[connection signal="button_down" from="Places/Escola/TextureButton" to="Places/Escola" method="_on_TextureButton_button_down"]
[connection signal="button_down" from="Places/Escola/Button" to="Places/Escola" method="_on_Button_button_down"]
[connection signal="button_down" from="Places/Mercado/TextureButton" to="Places/Mercado" method="_on_TextureButton_button_down"]
[connection signal="button_down" from="Places/Mercado/Button" to="Places/Mercado" method="_on_Button_button_down"]
[connection signal="button_down" from="Places/Restaurante/TextureButton" to="Places/Restaurante" method="_on_TextureButton_button_down"]
[connection signal="button_down" from="Places/Restaurante/Button" to="Places/Restaurante" method="_on_Button_button_down"]
[connection signal="button_down" from="Places/Escritorio/TextureButton" to="Places/Escritorio" method="_on_TextureButton_button_down"]
[connection signal="button_down" from="Places/Escritorio/Button" to="Places/Escritorio" method="_on_Button_button_down"]
[connection signal="button_down" from="Places/Aeroporto/TextureButton" to="Places/Aeroporto" method="_on_TextureButton_button_down"]
[connection signal="button_down" from="Places/Aeroporto/Button" to="Places/Aeroporto" method="_on_Button_button_down"]
[connection signal="button_down" from="Population/Catia/Button" to="Population/Catia" method="_on_Button_button_down"]
[connection signal="button_down" from="Population/Ivo/Button" to="Population/Ivo" method="_on_Button_button_down"]
[connection signal="button_down" from="Population/Leo/Button" to="Population/Leo" method="_on_Button_button_down"]
[connection signal="button_down" from="Population/Cal/Button" to="Population/Cal" method="_on_Button_button_down"]
[connection signal="button_down" from="Population/Mark/Button" to="Population/Mark" method="_on_Button_button_down"]
[connection signal="button_down" from="Population/Sinty/Button" to="Population/Sinty" method="_on_Button_button_down"]
[connection signal="button_down" from="Population/Eron/Button" to="Population/Eron" method="_on_Button_button_down"]
[connection signal="button_down" from="Population/Judite/Button" to="Population/Judite" method="_on_Button_button_down"]
[connection signal="button_down" from="Population/Neil/Button" to="Population/Neil" method="_on_Button_button_down"]
[connection signal="button_down" from="Population/Mary/Button" to="Population/Mary" method="_on_Button_button_down"]
[connection signal="button_down" from="NextTurn" to="canvas_jornal/jornal" method="_on_NextTurn_button_down"]
[connection signal="button_down" from="NextTurn" to="." method="_on_NextTurn_button_down"]
[connection signal="button_down" from="RetornaMenu" to="." method="_on_RetornaMenu_button_down"]
[connection signal="button_down" from="Isolar" to="Population" method="_on_Button_button_down"]
[connection signal="button_up" from="canvas_jornal/bJornal" to="." method="_on_bJornal_button_up"]
